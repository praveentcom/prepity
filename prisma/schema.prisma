generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Request {
  id                 Int           @id @default(autoincrement())
  category           String
  query              String
  status             RequestStatus @default(PENDING)
  difficulty         Difficulty    @default(MEDIUM)
  initQuestionsCount Int           @default(10)
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  requestSlug        String        @unique
  isStarred          Boolean       @default(false)
  visibility         Visibility    @default(PRIVATE)
  title              String?
  fileUri            String?
  mimeType           String?
  questions          Question[]
}

model Question {
  id               Int       @id @default(autoincrement())
  question         String
  option1          String
  option2          String
  option3          String
  option4          String
  correctOption    Int       @db.SmallInt
  explanation      String?
  hint             String?
  requestId        Int
  isStarred        Boolean   @default(false)
  isAnswered       Boolean   @default(false)
  userAnswer       Int?      @db.SmallInt
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  answeredAt       DateTime?
  hint2            String?
  isMarkedForLater Boolean   @default(false)
  citation         String?
  request          Request   @relation(fields: [requestId], references: [id], onDelete: Cascade)

  @@index([requestId])
}

enum RequestStatus {
  PENDING
  PROCESSING
  PARTIALLY_CREATED
  CREATED
  FAILED
}

enum Difficulty {
  EASY
  MEDIUM
  HARD
}

enum Visibility {
  PRIVATE
  PUBLIC
}
